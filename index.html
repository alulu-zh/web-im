<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>环信WebIM</title>
    <link rel="stylesheet" href="css/webim.css">

    <!--sdk所需的js文件-->
    <script src="js/sdk/strophe.js"></script>
    <script src="js/sdk/easemob.im-2.0.js"></script>

    <!--demo依赖的js文件-->
    <script src="js/lib/avalon.min.js"></script>
    <script src="js/lib/swfupload/swfupload.js"></script>
    <script src="js/easemob.im.config.js"></script>
    <script src="js/easemob.im.js"></script>
</head>
<body>
    
    <div ms-controller='signin' ms-include='emimSignin'></div><!-- 登录界面 -->
    <div ms-controller='signup' ms-include='emimSignup'></div><!-- 注册界面 -->
    <div ms-controller='chat' ms-include='emimChat'></div><!-- 聊天主界面 -->
    <footer class='emim-w100'>© 2015 easemob</footer><!-- footer -->








    <!----------------modules start-------------------->

    <!-- 登录界面 -->
    <script id='emimSignin' type='tpl'>
    <div ms-visible='display' class='emim-prl emim-sign-bg emim-auto emim-mt50'>
        <h3 class='emim-w100 emim-center'>Sign In</h3>
        <input type='text' autofocus='autofocus' placeholder='Username' class='emim-db emim-auto emim-mt20' ms-duplex='username' ms-keydown='signin'>
        <input type='password' ms-attr-placeholder='port' class='emim-db emim-auto emim-mt20' ms-duplex='password' ms-keydown='signin'>
        <i ms-click='transfer'>{{content}}</i>
        <button class='emim-db emim-auto emim-mt50 emim-themebg emim-center' ms-click='signin'>Sign in</button>
        <button class='emim-db emim-auto emim-sign-btn emim-center emim-mt10' ms-click='showSignup'>Sign up</button>
    </div>
    </script>

    <!-- 注册界面 -->
    <script id='emimSignup' type='tpl'>
    <div ms-visible='display' class="emim-prl emim-sign-bg emim-auto emim-mt50">
        <h3 class='emim-w100 emim-center'>Sign Up</h3>
        <input type='text' placeholder='Username' class='emim-db emim-auto emim-mt20' ms-duplex='username' ms-keydown='signup'>
        <input type='password' placeholder='Password' class='emim-db emim-auto emim-mt20' ms-duplex='password' ms-keydown='signup'>
        <input type='text' placeholder='Nickname' class='emim-db emim-auto emim-mt20' ms-duplex='nickname' ms-keydown='signup'>
        <button class='emim-db emim-auto emim-center emim-mt50 emim-themebg' ms-click='signup'>Sign Up</button>
        <div class='emim-signup-back' ms-click='back'></div>
    </div>
    </script>

    <!-- 聊天主界面 -->
    <script id='emimChat' type='tpl'>
    <div id='emimWrapper' ms-visible='display' class='emim-wrapper emim-auto'>
        <div class='emim-h100 emim-prl emim-chatLeft emim-fl'>
            <div class='emim-profile' ms-controller='profile' ms-include='emimProfile'></div>
            <div class='emim-list-tab' ms-include='emimListTab'></div>
            <div class='emim-list' ms-controller='emimContactWrapper' ms-css-height='height-118' ms-include='emimList'></div>
        </div>
        <div class='emim-h100 emim-prl emim-chatRight'>
            <div class='emim-center emim-current-header' ms-controller='chatHeader'>
                <span class='emim-chat-to'>{{to}}</span>
                <span class='emim-font emim-pab emim-font-hover emim-chat-clear'>h</span>
            </div>
            <hr class='emim-auto emim-current-header-border'/>
            <div class='emim-chat-wrapper' ms-controller='chatWrapper' ms-css-height='height-228'>
                <div class='emim-h100 emim-chat-content' ms-repeat-item='friend' ms-attr-id='item.name' ms-class='emim-hide:cur!=item.name'></div>
                <div class='emim-h100 emim-chat-content' ms-repeat-item='group' ms-attr-id='item.id' ms-class='emim-hide:cur!=item.id'></div>
                <div class='emim-h100 emim-chat-content' ms-repeat-item='stranger' ms-attr-id='item.name' ms-class='emim-hide:cur!=item.name'></div>
            </div>
            <div class='emim-pab emim-w100 emim-chat-send' ms-include='emimSendWrapper'></div>
        </div>
    </div>
    </script>

    <!-- 个人头像区 -->
    <script id='emimProfile' type='tpl'>
    <img class='emim-avatar emim-profile-avatar' ms-attr-src='src' />
    <span class='emim-profile-username'>{{username}}</span>
    <span class='emim-font emim-font-hover emim-profile-dropdown' ms-click='toggle'>g</span>
    <ul class='emim-dropdown-menu' ms-visible='display'>
        <li ms-click='dialog'>添加好友</li>
        <li ms-click='dialog'>删除好友</li>
        <li ms-click='logout'>退出</li>
    </ul>
    </script>

    <!-- 列表tab -->
    <script id='emimListTab' type='tpl'>
    <ol ms-controller='contactTab'>
        <li class='emim-font emim-font-hover emim-friend-tab' ms-class='emim-cur: cur=="friend"' ms-click='toggle("friend")'>a</li>
        <li class='emim-font emim-font-hover emim-group-tab' ms-class='emim-cur: cur=="group"' ms-click='toggle("group")'>b</li>
        <li class='emim-font emim-font-hover emim-stranger-tab' ms-class='emim-cur: cur=="stranger"' ms-click='toggle("stranger")'>c</li>       
    </ol>
    </script>

    <!-- 联系人列表 -->
    <script id='emimList' type='tpl'>
    <div ms-controller='contactList'>
        <div ms-class='emim-hide: curWrapper!="friend"'>
            <div ms-repeat-item='friend' ms-attr-id='item.name + "Contact"' class='emim-prl emim-contact' ms-click='select' ms-class='emim-contact-cur:cur==item.name + "Contact"' ms-include='emimContact'></div>
        </div>
        <div ms-class='emim-hide: curWrapper!="group"'>
            <div ms-repeat-item='group' ms-attr-roomId='item.roomId' ms-attr-id='item.roomId + "Contact"' class='emim-prl emim-contact' ms-click='select' ms-class='emim-contact-cur:cur==item.roomId + "Contact"' ms-include='emimContact'></div>
        </div>
        <div ms-class='emim-hide: curWrapper!="stranger"'>
            <div ms-repeat-item='stranger' ms-attr-id='item.id + "Contact"' class='emim-prl emim-contact' ms-click='select' ms-class='emim-contact-cur:cur==item.id + "Contact"' ms-include='emimContact'></div>
        </div>
    </div>
    </script>


    <script id='emimContact' type='tpl'>
        <img class='emim-avatar emim-contact-avatar' ms-attr-src='"img/avatar.png" || item.src'/>
        <span class='emim-prl emim-contact-username'>{{item.name}}</span>
        <span class='emim-contact-msg'></span>
        <span class='emim-contact-count' style='display: none'></span>
    </script>

    
    <!-- 消息发送区 -->
    <script id='emimSendWrapper' type='tpl'>
    <div ms-controller='send' class='emim-prl'>
        <div class='chat02_title'>
            <span class='emim-font emim-font-hover' ms-click='showFace' title='选择表情'>d</span>
            <span class='emim-font emim-font-hover' ms-click='sendFile' title='选择文件'>e</span>
        </div>
        <ul ms-click="faceSelect"  ms-visible='faceShow' class='emim-face-wrapper'>
            <li ms-repeat-item='faces' class='emim-center'><img ms-attr-src='"img/faces/" + item.src + ".png"' ms-attr-data='item.data'></li>
        </ul>
        <div class='emim-w95 emim-auto'>
            <textarea class='emim-w100 emim-chat-textarea' spellcheck='false' ms-duplex='text'></textarea>
        </div>
        <button class='emim-themebg emim-pab emim-send-button' ms-click="send">Send</button>
        <input id='fileInput' type='file' ms-visible='false' ms-duplex='file' ms-change='realSendFile'>
    </div>
    </script>

    <!-- Dialog -->
    <div ms-controller='dialog' class='emim-dialog' ms-visible='display'>
        <p class='emim-dialog-title'>{{title}}</p>
        <div class='emim-dialog-content'>{{content}}</div>
        <button class='emim-dialog-cancel' ms-click='cancel'>取消</button>
        <button class='emim-dialog-ok' ms-click='ok'>确定</button>
    </div>

    <!-- 群组成员界面 -->
    <script id='emimGroupMember' type='tpl'>
    <div id="option-room-div-modal" class="">
        <button type="button" class="close">×</button>
        <div class="modal-header">
            <h3>群组成员</h3>
        </div>
        <div class="modal-body">
            <div id="room-member-list"></div>
        </div>
    </div>
    </script>

    <!-- loading -->
    <div ms-controller='loading' ms-visible='display'></div>

    <!-- prompt -->
    <div ms-controller='prompt' class='emim-w100 emim-prompt' ms-css-top='t'>{{content}}</div>

    <!--layer-->
    <div class='emim-w100 emim-h100 emim-layer' ms-visible='display' ms-controller='layer'></div>
    <!----------------modules end-------------------->

    <!--
    <div id="addFridentModal" class="">
        <div class="modal-header">
            <button type="button" class="close">×</button>
            <h3>添加好友</h3>
        </div>
        <div class="modal-body">
            <input id="addfridentId" onfocus="clearInputValue(&quot;addfridentId&quot;)">
            <div id="add-frident-warning"></div>
        </div>
        <div class="modal-footer">
            <button id="addFridend" class="" onclick="startAddFriend()">添加</button>
            <button id="cancelAddFridend" class="btn">取消</button>
        </div>
    </div>

    <div id="delFridentModal" class="">
        <div class="modal-header">
            <button type="button" class="close">×</button>
            <h3>删除好友</h3>
        </div>
        <div class="modal-body">
            <input id="delfridentId" onfocus="clearInputValue(&quot;delfridentId&quot;)">
            <div id="del-frident-warning"></div>
        </div>
        <div class="modal-footer">
            <button id="delFridend" class="" onclick="directDelFriend()">删除</button>
            <button id="canceldelFridend" class="">取消</button>
        </div>
    </div>-->

    <!-- 一般消息通知
    <div id="notice-block-div" class="modal hide">
        <button type="button" class="close">×</button>
        <div class="modal-body">
            <h4>Warning!</h4>
            <div id="notice-block-body"></div>
        </div>
    </div> -->

    <!-- 确认消息通知
    <div id="confirm-block-div-modal" class="">
        <div class="modal-header">
            <h3>订阅通知</h3>
        </div>
        <div class="modal-body">
            <div id="confirm-block-footer-body"></div>
        </div>
        <div class="modal-footer">
            <button id="confirm-block-footer-confirmButton" class="">同意</button>
            <button id="confirm-block-footer-cancelButton" class="">拒绝</button>
        </div>
    </div> -->
</body>
</html>
